#pragma once

#ifndef RING0
#warning "keyboard.h can only be used in ring 0"
#endif // RING0

#ifdef RING0

#include <stdint.h>
#include <stdbool.h>

#define KEYBOARD_DATA_PORT 0x60
#define KEYBOARD_STATUS_PORT 0x64

typedef enum
{
    ESCAPE_PRESSED = 0x01,
    ONE_PRESSED,
    TWO_PRESSED,
    THREE_PRESSED,
    FOUR_PRESSED,
    FIVE_PRESSED,
    SIX_PRESSED,
    SEVEN_PRESSED,
    EIGHT_PRESSED,
    NINE_PRESSED,
    ZERO_PRESSED,
    HYPHEN_PRESSED,
    EQUALS_PRESSED,
    BACKSPACE_PRESSED,
    TAB_PRESSED,
    Q_PRESSED,
    W_PRESSED,
    E_PRESSED,
    R_PRESSED,
    T_PRESSED,
    Y_PRESSED,
    U_PRESSED,
    I_PRESSED,
    O_PRESSED,
    P_PRESSED,
    LEFT_BRACKET_PRESSED,
    RIGHT_BRACKET_PRESSED,
    ENTER_PRESSED,
    LEFT_CTRL_PRESSED,
    A_PRESSED,
    S_PRESSED,
    D_PRESSED,
    F_PRESSED,
    G_PRESSED,
    H_PRESSED,
    J_PRESSED,
    K_PRESSED,
    L_PRESSED,
    SEMICOLON_PRESSED,
    SINGLE_QUOTE_PRESSED,
    BACK_TICK_PRESSED,
    LEFT_SHIFT_PRESSED,
    BACKSLASH_PRESSED,
    Z_PRESSED,
    X_PRESSED,
    C_PRESSED,
    V_PRESSED,
    B_PRESSED,
    N_PRESSED,
    M_PRESSED,
    COMMA_PRESSED,
    PERIOD_PRESSED,
    FORWARDSLASH_PRESSED,
    RIGHT_SHIFT_PRESSED,
    LEFT_ALT_PRESSED = 0x38,
    SPACE_PRESSED,
    CAPS_LOCK_PRESSED,
    F1_PRESSED,
    F2_PRESSED,
    F3_PRESSED,
    F4_PRESSED,
    F5_PRESSED,
    F6_PRESSED,
    F7_PRESSED,
    F8_PRESSED,
    F9_PRESSED,
    F10_PRESSED,
    F11_PRESSED = 0x57,
    F12_PRESSED,
    ESCAPE_RELEASED = 0x81,
    ONE_RELEASED,
    TWO_RELEASED,
    THREE_RELEASED,
    FOUR_RELEASED,
    FIVE_RELEASED,
    SIX_RELEASED,
    SEVEN_RELEASED,
    EIGHT_RELEASED,
    NINE_RELEASED,
    ZERO_RELEASED,
    HYPHEN_RELEASED,
    EQUALS_RELEASED,
    BACKSPACE_RELEASED,
    TAB_RELEASED,
    Q_RELEASED,
    W_RELEASED,
    E_RELEASED,
    R_RELEASED,
    T_RELEASED,
    Y_RELEASED,
    U_RELEASED,
    I_RELEASED,
    O_RELEASED,
    P_RELEASED,
    LEFT_BRACKET_RELEASED,
    RIGHT_BRACKET_RELEASED,
    ENTER_RELEASED,
    LEFT_CTRL_RELEASED,
    A_RELEASED,
    S_RELEASED,
    D_RELEASED,
    F_RELEASED,
    G_RELEASED,
    H_RELEASED,
    J_RELEASED,
    K_RELEASED,
    L_RELEASED,
    SEMICOLON_RELEASED,
    SINGLE_QUOTE_RELEASED,
    BACK_TICK_RELEASED,
    LEFT_SHIFT_RELEASED,
    BACKSLASH_RELEASED,
    Z_RELEASED,
    X_RELEASED,
    C_RELEASED,
    V_RELEASED,
    B_RELEASED,
    N_RELEASED,
    M_RELEASED,
    COMMA_RELEASED,
    PERIOD_RELEASED,
    FORWARDSLASH_RELEASED,
    RIGHT_SHIFT_RELEASED,
    LEFT_ALT_RELEASED = 0xb8,
    SPACE_RELEASED,
    CAPS_LOCK_RELEASED,
    F1_RELEASED,
    F2_RELEASED,
    F3_RELEASED,
    F4_RELEASED,
    F5_RELEASED,
    F6_RELEASED,
    F7_RELEASED,
    F8_RELEASED,
    F9_RELEASED,
    F10_RELEASED,
    F11_RELEASED = 0xD7,
    F12_RELEASED
} keyCode_t;

enum keyPortStatus
{
    KEY_BUFFER_EMPTY = 0x00,
    KEY_BUFFER_FULL = 0x01,
    KEY_RELEASED = 0x80
};

uint8_t convertScancode(uint8_t scancode); 
bool isPrintable(uint8_t character);

#endif // RING0